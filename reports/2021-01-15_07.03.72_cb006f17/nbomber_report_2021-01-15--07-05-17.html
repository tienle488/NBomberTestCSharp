<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>NBomber</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">

<style>
#wrapper {
    padding-left: 70px;
    transition: all .4s ease 0s;
    height: 100%
}

#sidebar-wrapper {
    top: calc(50px + var(--header-padding-top) + var(--header-padding-bottom));
    margin-left: -200px;
    left: 70px;
    width: 200px;
    position: fixed;
    height: 100%;
    z-index: 10000;
    transition: left .4s ease 0s;
    overflow: auto;
}

#page-content-wrapper {
    transition: all .4s ease 0s;
    margin: calc(65px + var(--header-padding-top) + var(--header-padding-bottom)) 0px 0px 200px;
}

#page-content-wrapper.active {
    margin-left: 70px;
}

.sidebar-nav {
    display: block;
    float: left;
    width: 200px;
    list-style: none;
    margin: 0;
    padding: 0;
}

#wrapper.active {
    padding-left: 200px;
}

#wrapper.active #sidebar-wrapper {
    left: 200px;
}

#sidebar_menu li a, .sidebar-nav li a {
    display: block;
    float: left;
    text-decoration: none;
    width: 200px;
    background: rgba(255, 255, 255, 0.01);
    -webkit-transition: background .5s;
    -moz-transition: background .5s;
    -o-transition: background .5s;
    -ms-transition: background .5s;
    transition: background .5s;
}

.sidebar-nav li {
    line-height: 40px;
    text-indent: 20px;
}

.sidebar-nav li a {
    color: #999999 !important;
    display: block;
    text-decoration: none;
    font-size: 15px;
}

.sidebar-nav li a:hover,
.sidebar-nav li a.active {
    color: #fff !important;
    background: rgba(255, 255, 255, 0.3) !important;
    text-decoration: none;
}

.sidebar-nav li a:active, .sidebar-nav li a:focus {
    text-decoration: none;
}

.sidebar-nav li a.active {
    font-weight: bold;
}

.sidebar-nav > .sidebar-brand {
    height: 65px;
    line-height: 60px;
    font-size: 18px;
}

.main-icon {
    float: right;
    padding-right: 30px;
    padding-top: 20px;
}

.sub-icon {
    float: right;
    padding-right: 30px;
    padding-top: 10px;
}

.sub-icon.sub-icon-environment {
    padding-right: 27px;
}

.sub-icon.sub-icon-test-suite {
    padding-right: 28px;
}

.sub-icon.sub-icon-plugin {
    padding-right: 25px;
}

.sub-icon.sub-icon-scenario {
    padding-right: 88px;
    padding-top: 3px;
}

.sub-icon.sub-icon-plugin {
    padding-right: 22px;
}

.fa-stack .stack-label {
    font-size: 9px;
}

.content-header {
    height: 65px;
    line-height: 65px;
}

.content-header h1 {
    margin: 0;
    margin-left: 20px;
    line-height: 65px;
    display: inline-block;
}

@media (max-width:768px) {
    #wrapper {
        padding-left: 70px;
        transition: all .4s ease 0s;
    }

    #sidebar-wrapper {
        left: 70px;
    }

    #wrapper.active {
        padding-left: 200px;
    }

    #wrapper.active #sidebar-wrapper {
        left: 200px;
        width: 200px;
        transition: all .4s ease 0s;
    }
}

footer p {
    position: absolute;
    bottom: 0;
    right: 0;
    margin-bottom: 85px;
    padding-left: 18px;
    padding-right: 20px;
    font-size: 12px;
    width: 35%;
    transition: width .4s ease;
}

.active footer p {
    width: 100%;
}

</style>
<style>
[v-cloak] {
    display: none;
}

:root {
    --header-padding-top: 0.5vw;
    --header-padding-bottom: 0.3vw;
}

.navbar-brand {
    padding: 0;
}

.navbar {
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    padding-top: var(--header-padding-top);
    padding-bottom: var(--header-padding-bottom);
}

.nav-step-stats.nav > a {
    color: #2e3951;
}

    .nav-step-stats.nav > a:hover {
        color: #2196f3;
    }

    .nav-step-stats.nav > a.active, .nav-step-stats.nav > a.active:hover {
        color: #2196f3;
        font-weight: bold;
    }

.sticky-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    padding-left: 15px;
}

.sticky {
    position: -webkit-sticky;
    position: sticky;
    top: 60px;
}

h6 {
    padding: 10px;
}

.card.custom {
    margin-bottom: 20px;
}

    .card.custom .card-header h6 {
        margin: 0
    }

.scenario table tr th {
    text-align: center;
}

.scenario table tr td {
    text-align: right;
}

    .scenario table tr td:first-child {
        text-align: left;
    }

.chart {
    height: 200px;
}

    .chart.chart-timeline {
        height: 400px;
    }

    .chart.chart-timelinechart-timeline-scenario-load {
        height: 100px;
    }

[data-toggle="collapse"] .fa {
    transition: .3s transform ease-in-out;
}

[data-toggle="collapse"].collapsed .fa {
    transform: rotate(-90deg);
}

</style>
    <!-- No Data Template -->
    <script type="text/x-template" id="no-data-template">
        <h3>No Data</h3>
    </script>

    <!-- Scenario Header -->
    <script type="text/x-template" id="scenario-header-template">
        <span>
            scenario #{{scenarioIndex + 1}}: <span class="custom mdb-color darken-1 blue-text font-weight-bold">{{scenarioStats.ScenarioName}}</span>
        </span>
    </script>

    <!-- Cluster Info Table -->
    <script type="text/x-template" id="node-info-table-template">
        <div class="card custom" v-if="nodeInfo">
            <div class="card-header mdb-color darken-2 white-text">
                <h6>Environment</h6>
            </div>
            <div class="card-body">
                <table class="table table-hover table-sm table-responsive-lg">
                    <thead class="mdb-color lighten-2 white-text">
                        <tr>
                            <th>Machine Name</th>
                            <th>OS</th>
                            <th>.NET Runtime</th>
                            <th>Processor</th>
                            <th>Cores</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>{{nodeInfo.MachineName}}</td>
                            <td>{{nodeInfo.OS.VersionString}}</td>
                            <td>{{nodeInfo.DotNetVersion}}</td>
                            <td>{{nodeInfo.Processor}}</td>
                            <td>{{nodeInfo.CoresCount}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
        <no-data v-else></no-data>
    </script>

    <!-- Scenarios Stats Table Template -->
    <script type="text/x-template" id="scenario-stats-table-template">
        <table class="table table-hover table-striped table-bordered table-sm table-responsive-lg">
            <thead class="mdb-color lighten-2 white-text">
                <tr>
                    <th></th>
                    <th colspan="4">request number</th>
                    <th colspan="3">latency, ms</th>
                    <th colspan="5">latency percentile, ms</th>
                    <th colspan="4">data transfer</th>
                </tr>
                <tr>
                    <th>step</th>
                    <th>all</th>
                    <th>ok</th>
                    <th>failed</th>
                    <th>RPS</th>
                    <th>min</th>
                    <th>mean</th>
                    <th>max</th>
                    <th>50th</th>
                    <th>75th</th>
                    <th>95th</th>
                    <th>99th</th>
                    <th>StdDev</th>
                    <th>min, KB</th>
                    <th>mean, KB</th>
                    <th>max, KB</th>
                    <th>all, MB</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(stepStats, index) in scenarioStats.StepStats" :key="`step-stats-${index}`">
                    <td>{{stepStats.StepName}}</td>
                    <td>{{stepStats.RequestCount}}</td>
                    <td>{{stepStats.OkCount}}</td>
                    <td>{{stepStats.FailCount}}</td>
                    <td>{{stepStats.RPS}}</td>
                    <td>{{stepStats.Min}}</td>
                    <td>{{stepStats.Mean}}</td>
                    <td>{{stepStats.Max}}</td>
                    <td>{{stepStats.Percent50}}</td>
                    <td>{{stepStats.Percent75}}</td>
                    <td>{{stepStats.Percent95}}</td>
                    <td>{{stepStats.Percent99}}</td>
                    <td>{{stepStats.StdDev}}</td>
                    <td>{{stepStats.MinDataKb}}</td>
                    <td>{{stepStats.MeanDataKb}}</td>
                    <td>{{stepStats.MaxDataKb}}</td>
                    <td>{{stepStats.AllDataMB}}</td>
                </tr>
                <tr class="mdb-color lighten-2 white-text">
                    <th>total</th>
                    <th>{{scenarioStats.RequestCount}}</th>
                    <th>{{scenarioStats.OkCount}}</th>
                    <th>{{scenarioStats.FailCount}}</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th>{{scenarioStats.AllDataMB}}</th>
                </tr>
            </tbody>
        </table>
    </script>

    <!-- Plugins Stats Table Template -->
    <script type="text/x-template" id="plugins-stats-table-template">
        <div class="row">
            <div class="col">
                <div v-for="(pluginStats, pluginIndex) in pluginsStats"
                     :key="`plugin-stats-${pluginIndex}`"
                     v-if="pluginsStats"
                     class="card custom scenario">
                    <div class="card-header mdb-color darken-2 white-text">
                        <h6>plugin stats: <span class="custom mdb-color darken-1 blue-text font-weight-bold">{{pluginStats.TableName}}</span></h6>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover table-striped table-sm table-responsive-lg">
                            <thead class="mdb-color lighten-2 white-text">
                                <tr>
                                    <th v-for="(col, index) in pluginStats.Columns" :key="`plugin-stats-col-${index}`">
                                        {{col}}
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(row, index) in pluginStats.Rows" :key="`plugin-stats-row-${index}`">
                                    <td v-for="(value, colIndex) in row" :key="`plugin-stats-row-${index}-${colIndex}`">
                                        {{value}}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </script>

</head>
<body>
    <div id="app">
        <!-- Navbar -->
        <nav class="navbar mdb-color darken-3">
            <a class="navbar-brand" href="https://nbomber.com/" target="_blank">
                <img src="https://raw.githubusercontent.com/PragmaticFlow/NBomber/master/assets/nbomber_logo.png"
                     height="50" class="d-inline-block align-top" alt="NBomber" />
            </a>
            <div class="custom-control custom-switch" v-show="showChartsSwitcher" v-cloak>
                <input type="checkbox" class="custom-control-input" id="charts-switcher" v-model="showCharts">
                <label class="custom-control-label white-text" for="charts-switcher">Toggle Charts</label>
            </div>
        </nav>

        <!-- Sidebar -->
        <div id="wrapper" :class="{ active: sideBarActive }" v-cloak>
            <div id="sidebar-wrapper" class="mdb-color darken-3">
                <!-- Menu -->
                <ul class="sidebar-nav">
                    <li class="sidebar-brand">
                        <a id="menu-toggle" href="#" @click.prevent="toggleSideBar">
                            Menu<span class="main-icon fas fa-align-justify"></span>
                        </a>
                    </li>
                </ul>

                <ul class="sidebar-nav nav nav-pills mb-3" role="tablist">
                    <li class="nav-item">
                        <a data-toggle="pill" href="#env-view" role="tab" aria-controls="env-view"
                           @click="selectView('environment')">
                            Environment <span class="sub-icon sub-icon-environment fas fa-desktop"></span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a data-toggle="pill" href="#test-suite-view" class="active" role="tab" aria-controls="test-suite-view"
                           @click="selectView('test-suite')">
                            Test Suite <span class="sub-icon sub-icon-test-suite fas fa-flask"></span>
                        </a>
                    </li>

                    <li v-for="(scenarioStats, index) in viewModel.statsData.ScenarioStats"
                        :key="`nav-scenario-stats-${index}`"
                        data-toggle="tooltip"
                        data-placement="right"
                        :title="scenarioStats.ScenarioName">

                        <a data-toggle="pill"
                           :href="`#scenario-${index}-view`"
                           role="tab"
                           :aria-controls="`scenario-${index}-view`"
                           @click="selectView(`scenario-${index}`)">
                            Scenario #{{index + 1}}
                            <span class="sub-icon sub-icon-scenario fas fa-stack">
                                <span class="far fa-circle fa-stack-1x"></span>
                                <span class="fas fa-stack-1x stack-label">{{index + 1}}</span>
                            </span>
                        </a>
                    </li>

                    <li class="nav-item" v-if="viewModel.statsData.PluginStats && viewModel.statsData.PluginStats.length > 0">
                        <a data-toggle="pill" href="#plugins-stats-view" role="tab" aria-controls="plugins-stats-view"
                           @click="selectView('plugins')">
                            Plugins <span class="sub-icon sub-icon-plugin fas fa-puzzle-piece"></span>
                        </a>
                    </li>
                </ul>
                <footer>
                    <p class="blue-grey-text" v-cloak>
                        <span>v{{viewModel.nBomberInfo.NBomberVersion}}</span>
                    </p>
                </footer>
            </div>
        </div>

        <!-- Content -->
        <div id="page-content-wrapper" :class="{ active: !sideBarActive }">
            <div class="container">

                <div class="text-center" v-if="false">
                    <div class="spinner-border" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>

                <div class="tab-content" v-cloak>
                    <!-- Environment View -->
                    <div class="tab-pane fade show" id="env-view" role="tabpanel">
                        <div class="row">
                            <div class="col">
                                <node-info-table :node-info="viewModel.statsData.NodeInfo"></node-info-table>
                            </div>
                        </div>
                    </div>
                    <!-- Test Suite View -->
                    <div class="tab-pane fade show active" id="test-suite-view" role="tabpanel"
                         v-if="viewModel.statsData.ScenarioStats && viewModel.statsData.PluginStats">

                        <div v-for="(scenarioStats, scenarioIndex) in viewModel.statsData.ScenarioStats"
                             :key="`test-suite-scenario-stats-${scenarioIndex}`"
                             v-if="viewModel.statsData.ScenarioStats">

                            <div class="row">
                                <div class="col">
                                    <div class="card custom scenario">
                                        <div class="card-header mdb-color darken-2 white-text">
                                            <h6>
                                                <a href="#" class="white-text"
                                                   data-toggle="collapse" :data-target="`#test-suite-scenario-content-${scenarioIndex}`"
                                                   aria-expanded="true" :aria-controls="`test-suite-scenario-content-${scenarioIndex}`">
                                                    <span class="fa fa-chevron-down float-right"></span>
                                                    <scenario-header :scenario-stats="scenarioStats" :scenario-index="scenarioIndex"></scenario-header>
                                                </a>
                                            </h6>
                                        </div>
                                        <div class="card-body">
                                            <div :id="`test-suite-scenario-content-${scenarioIndex}`" class="show">
                                                <scenario-stats-table :scenario-stats="scenarioStats"></scenario-stats-table>
                                                <div v-show="showCharts">
                                                    <div class="row">
                                                        <div class="col-8">
                                                            <!-- TestSuite View / Scenario Latency (Columns) -->
                                                            <chart-scenario-latency-indicators :scenario-stats="scenarioStats"></chart-scenario-latency-indicators>
                                                        </div>
                                                        <div class="col-4">
                                                            <!-- TestSuite View / Scenario Requests -->
                                                            <chart-scenario-requests :scenario-stats="scenarioStats"></chart-scenario-requests>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col">
                                                            <!-- Test View / Scenario Latency -->
                                                            <chart-scenario-latency-distribution :timeline-stats="viewModel.timeLineStatsData"
                                                                                                 :scenario-index="scenarioIndex">
                                                            </chart-scenario-latency-distribution>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <plugins-stats-table :plugins-stats="viewModel.statsData.PluginStats"></plugins-stats-table>
                    </div>
                    <no-data v-else></no-data>
                    <!-- Scenarios Views -->
                    <div v-for="(scenarioStats, scenarioIndex) in viewModel.statsData.ScenarioStats" :key="`scenario-stats-${scenarioIndex}`"
                         class="tab-pane fade show"
                         :id="`scenario-${scenarioIndex}-view`"
                         role="tabpanel">

                        <!-- Scenario Stats -->
                        <div class="row">
                            <div class="col">
                                <div class="card custom scenario">
                                    <div class="card-header mdb-color darken-2 white-text">
                                        <h6>
                                            <scenario-header :scenario-stats="scenarioStats" :scenario-index="scenarioIndex"></scenario-header>
                                        </h6>
                                    </div>
                                    <div class="card-body">
                                        <scenario-stats-table :scenario-stats="scenarioStats"></scenario-stats-table>
                                        <lazy-load :loaded-views="loadedViews" :load-for-view="`scenario-${scenarioIndex}`">
                                            <div class="row">
                                                <div class="col-8">
                                                    <!-- Scenario View / Scenario Latency (Column) -->
                                                    <chart-scenario-latency-indicators :scenario-stats="scenarioStats"></chart-scenario-latency-indicators>
                                                </div>
                                                <div class="col-4">
                                                    <!-- Scenario View / Scenario Requests -->
                                                    <chart-scenario-requests :scenario-stats="scenarioStats"></chart-scenario-requests>
                                                </div>
                                            </div>
                                        </lazy-load>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Step Stats -->
                        <div class="row">
                            <div class="col-2">
                                <div class="sticky-wrapper">
                                    <div class="card custom steps sticky">
                                        <div class="card-header mdb-color darken-2 white-text">
                                            <h6>steps</h6>
                                        </div>
                                        <div class="card-body">
                                            <div class="nav flex-column nav-step-stats" role="tablist" aria-orientation="vertical">
                                                <a v-for="(stepStats, stepIndex) in scenarioStats.StepStats"
                                                   :key="`scenario-stats-${scenarioIndex}-step-stats-${stepIndex}-link`"
                                                   :class="{'nav-link': true, active: stepIndex === 0}"
                                                   data-toggle="pill"
                                                   :href="`#scenario-${scenarioIndex}-view-step-${stepIndex}`"
                                                   role="tab"
                                                   :aria-controls="`#scenario-${scenarioIndex}-view-step-${stepIndex}`"
                                                   aria-selected="false"
                                                   data-placement="right"
                                                   :title="stepStats.StepName"
                                                   @click="selectView(`scenario-${scenarioIndex}-step-${stepIndex}`)">
                                                    Step #{{stepIndex + 1}}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-10">
                                <div class="tab-content">

                                    <div v-for="(stepStats, stepIndex) in scenarioStats.StepStats"
                                         :key="`scenario-stats-${scenarioIndex}-step-stats-${stepIndex}-tab`"
                                         :class="{ 'tab-pane': true, fade: true, show: stepIndex === 0, active: stepIndex === 0 }"
                                         :id="`scenario-${scenarioIndex}-view-step-${stepIndex}`"
                                         role="tabpanel"
                                         :aria-labelledby="`scenario-${scenarioIndex}-view-step-${stepIndex}`">

                                        <div class="card custom step">
                                            <div class="card-header mdb-color darken-2 white-text">
                                                <h6>
                                                    step #{{stepIndex + 1}}: <span class="custom mdb-color darken-1 blue-text font-weight-bold">{{stepStats.StepName}}</span>
                                                </h6>
                                            </div>
                                            <div class="card-body">
                                                <lazy-load :loaded-views="loadedViews"
                                                           :load-for-view="stepIndex === 0 ? `scenario-${scenarioIndex}` : `scenario-${scenarioIndex}-step-${stepIndex}`">

                                                    <!-- Scenario Step View / Step Throughput -->
                                                    <chart-timeline-step-throughput :timeline-stats="viewModel.timeLineStatsData"
                                                                                    :scenario-index="scenarioIndex"
                                                                                    :step-index="stepIndex">
                                                    </chart-timeline-step-throughput>

                                                    <!-- Scenario Step View / Step Latency -->
                                                    <chart-timeline-step-latency :timeline-stats="viewModel.timeLineStatsData"
                                                                                 :scenario-index="scenarioIndex"
                                                                                 :step-index="stepIndex">
                                                    </chart-timeline-step-latency>
                                                </lazy-load>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Plugins Stats Views -->
                    <div class="tab-pane fade show" id="plugins-stats-view" role="tabpanel"
                         v-if="viewModel.statsData.PluginStats && viewModel.statsData.PluginStats.length > 0">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb mdb-color darken-3">
                                <li class="breadcrumb-item active white-text" aria-current="page">{{viewModel.testInfo.TestSuite}}</li>
                                <li class="breadcrumb-item active white-text" aria-current="page">{{viewModel.testInfo.TestName}}</li>
                                <li class="breadcrumb-item active white-text" aria-current="page">Plugins</li>
                            </ol>
                        </nav>
                        <plugins-stats-table :plugins-stats="viewModel.statsData.PluginStats"></plugins-stats-table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>


<script>
const initApp = (appContainer, viewModel) => {
    // Utilities
    const createSeriesDataLatency = (scenarioStats, titles) => [
        { name: titles.series.latencyLow, y: scenarioStats.LatencyCount.Less800, color: theme.colors.stats.latency.low },
        { name: titles.series.latencyMedium, y: scenarioStats.LatencyCount.More800Less1200, color: theme.colors.stats.latency.medium },
        { name: titles.series.latencyHigh, y: scenarioStats.LatencyCount.More1200, color: theme.colors.stats.latency.high },
        { name: titles.series.failed, y: scenarioStats.FailCount, color: theme.colors.stats.failedCount }
    ];

    const createSeriesDataScenarioStats = (timelineStats, scenarioIndex, statsName) =>
        timelineStats.ScenarioStats.map(scenarios => scenarios[scenarioIndex][statsName]);

    const createSeriesDataScenarioStatsLatency = (timelineStats, scenarioIndex, latencyName) =>
        timelineStats.ScenarioStats.map(scenarios => scenarios[scenarioIndex].LatencyCount[latencyName]);

    const createSeriesDataScenarioStatsLoadSimulation = (timelineStats, scenarioIndex) =>
        timelineStats.ScenarioStats.map(scenarios => scenarios[scenarioIndex].LoadSimulationStats.Value);

    const createSeriesDataStepStats = (timelineStats, scenarioIndex, stepIndex, statsName) =>
        timelineStats.ScenarioStats.map(scenarios => scenarios[scenarioIndex].StepStats[stepIndex][statsName]);

    const createSeriesMarker = () => ({
        symbol: 'circle'
    });

    const createAxisXLatency = (title, color, titles) => ({
        title: {
            text: title,
            style: {
                fontSize: '12px',
                color
            }
        },
        labels: {
            style: {
                fontSize: '10px',
                color
            }
        },
        categories: [
            titles.series.latencyLow,
            titles.series.latencyMedium,
            titles.series.latencyHigh,
            titles.series.failed
        ],
        crosshair: true
    });

    const createAxisXTimeline = (title, color, timelineStats) => ({
        title: {
            text: title,
            style: {
                fontSize: '12px',
                color
            }
        },
        labels: {
            style: {
                fontSize: '12px',
                color
            }
        },
        categories: timelineStats.TimeStamps,
        crosshair: true
    });

    const createAxisY = (title, color, opposite, hidden) => ({
        title: {
            text: title,
            style: {
                fontSize: '14px',
                fontWeight: 'bold',
                color,
            }
        },
        labels: {
            style: {
                fontSize: '12px',
                fontWeight: 'bold',
                color
            }
        },
        opposite,
        allowDecimals: false,
        visible: !hidden
    });

    const createPlotOptions = () => ({
        series: {
            marker: {
                enabled: false
            },
            cursor: 'pointer',
        },
        area: {
            opacity: 1,
            fillOpacity: 0.2
        },
        pie: {
            cursor: 'pointer',
            dataLabels: {
                enabled: false
            },
            point: {
                events: {
                    legendItemClick: function () {
                        return false;
                    }
                }
            },
            showInLegend: true
        },
        column: {
            maxPointWidth: 25
        }
    });

    const createPlotOptionsLatencyDistribution = () => {
        const plotOptions = createPlotOptions();
        plotOptions.groupPadding = 0;
        plotOptions.series.stacking = 'normal';
        return plotOptions;
    };

    const createTooltip = () => ({
        shared: true
    });

    const createTooltipLoadSimulation = (timelineStats, scenarioIndex) => ({
        pointFormatter: function (tooltip) {
            const loadSimulationName = timelineStats.ScenarioStats[this.index][scenarioIndex].LoadSimulationStats.SimulationName;
            return `<span style="color:${this.color}">●</span> ${this.series.name}: <b>${loadSimulationName} ${this.y}</b>`;
        }
    });

    const createSettingsChartScenarioRequests = (theme, scenarioStats, titles) => ({
        credits: {
            enabled: false
        },
        title: {
            text: titles.charts.scenarioRequests
        },
        tooltip: {
            pointFormat: '<span style="color:{point.color}">●</span> {series.name}: <b>{point.y}</b> ({point.percentage:.1f}%)'
        },
        plotOptions: createPlotOptions(),
        legend: {
            labelFormat: '{name}: {y}'
        },
        series: [
            {
                type: 'pie',
                name: 'requests',
                colorByPoint: true,
                size: '100%',
                innerSize: '50%',
                data: [
                    {
                        name: titles.series.ok,
                        y: scenarioStats.OkCount,
                        color: theme.colors.stats.okCount
                    }, {
                        name: titles.series.failed,
                        y: scenarioStats.FailCount,
                        color: theme.colors.stats.failedCount
                    }
                ]
            }
        ]
    });

    const createSettingsChartScenarioLatencyIndicators = (theme, scenarioStats, titles) => ({
        credits: {
            enabled: false
        },
        title: {
            text: titles.charts.latencyIndicators
        },
        xAxis: createAxisXLatency(titles.axisX.latency, theme.colors.xAxis, titles),
        yAxis: createAxisY(titles.axisY.requests, theme.colors.yAxis, false),
        tooltip: {
            pointFormatter: function () {
                if (this.index === 3) // failed
                    return `<span style="color:${this.color}">●</span> failed: <b>${this.y}</b> requests`;
                return `<span style="color:${this.color}">●</span> ${this.series.name}: <b>${this.y} requests</b>`
            }
        },
        plotOptions: createPlotOptions(),
        legend: {
            enabled: false
        },
        series: [
            {
                type: 'column',
                name: titles.series.latency,
                data: createSeriesDataLatency(scenarioStats, titles)
            }
        ]
    });

    const createSettingsChartScenarioLatencyDistribution = (theme, timelineStats, scenarioIndex, titles) => ({
        credits: {
            enabled: false
        },
        title: {
            text: 'latency distribution'
        },
        yAxis: [
            createAxisY(titles.axisY.latency, theme.colors.xAxis, false),
            createAxisY(titles.axisY.loadSimulation, theme.colors.stats.loadSimulation, true),
        ],
        xAxis: createAxisXTimeline(titles.axisX.duration, theme.colors.xAxis, timelineStats),
        tooltip: createTooltip(),
        plotOptions: createPlotOptionsLatencyDistribution(),
        series: [
            {
                type: 'column',
                name: titles.series.latencyLow,
                color: theme.colors.stats.latency.low,
                tooltip: {
                    valueSuffix: ' requests'
                },
                data: createSeriesDataScenarioStatsLatency(timelineStats, scenarioIndex, 'Less800')
            },
            {
                type: 'column',
                name: titles.series.latencyMedium,
                color: theme.colors.stats.latency.medium,
                tooltip: {
                    valueSuffix: ' requests'
                },
                data: createSeriesDataScenarioStatsLatency(timelineStats, scenarioIndex, 'More800Less1200')
            },
            {
                type: 'column',
                name: titles.series.latencyHigh,
                color: theme.colors.stats.latency.high,
                tooltip: {
                    valueSuffix: ' requests'
                },
                data: createSeriesDataScenarioStatsLatency(timelineStats, scenarioIndex, 'More1200')
            },
            {
                type: 'column',
                name: titles.series.failed,
                color: theme.colors.stats.failedCount,
                tooltip: {
                    valueSuffix: ' requests'
                },
                data: createSeriesDataScenarioStats(timelineStats, scenarioIndex, 'FailCount')
            },
            {
                name: titles.series.loadSimulation,
                yAxis: 1,
                zIndex: 1,
                marker: createSeriesMarker(),
                color: theme.colors.stats.loadSimulation,
                tooltip: createTooltipLoadSimulation(timelineStats, scenarioIndex),
                data: createSeriesDataScenarioStatsLoadSimulation(timelineStats, scenarioIndex)
            }
        ]
    });

    const createSettingsChartStepThroughput = (theme, timelineStats, scenarioIndex, stepIndex, titles) => ({
        credits: {
            enabled: false
        },
        title: {
            text: titles.charts.throughput
        },
        yAxis: [
            createAxisY(titles.axisY.rps, theme.colors.stats.rps, false),
            createAxisY(titles.axisY.loadSimulation, theme.colors.stats.loadSimulation, true)
        ],
        xAxis: createAxisXTimeline(titles.axisX.duration, theme.colors.xAxis, timelineStats),
        tooltip: createTooltip(),
        plotOptions: createPlotOptions(),
        series: [
            {
                name: titles.series.rps,
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.rps,
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'RPS')
            },
            {
                name: titles.series.loadSimulation,
                yAxis: 1,
                zIndex: 1,
                marker: createSeriesMarker(),
                color: theme.colors.stats.loadSimulation,
                tooltip: createTooltipLoadSimulation(timelineStats, scenarioIndex),
                data: createSeriesDataScenarioStatsLoadSimulation(timelineStats, scenarioIndex)
            }
        ]
    });

    const createSettingsChartStepLatency = (theme, timelineStats, scenarioIndex, stepIndex, titles) => ({
        credits: {
            enabled: false
        },
        title: {
            text: titles.charts.latency
        },
        yAxis: [
            createAxisY('response time, ms', theme.colors.yAxis, false),
            createAxisY('data, MB', theme.colors.stats.allDataMB, true, true),
            createAxisY(titles.axisY.loadSimulation, theme.colors.stats.loadSimulation, true)
        ],
        xAxis: createAxisXTimeline(titles.axisX.duration, theme.colors.xAxis, timelineStats),
        tooltip: createTooltip(),
        plotOptions: createPlotOptions(),
        series: [
            {
                name: 'min',
                type: 'area',
                color: theme.colors.stats.min,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Min')
            }, {
                name: 'mean',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.mean,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Mean')
            }, {
                name: 'max',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.max,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Max')
            }, {
                name: 'stdDev',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.stdDev,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'StdDev')
            }, {
                name: '75%',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.percentile75,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Percent75')
            }, {
                name: '95%',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.percentile95,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Percent95')
            }, {
                name: '99%',
                type: 'area',
                marker: createSeriesMarker(),
                color: theme.colors.stats.percentile99,
                tooltip: {
                    valueSuffix: ' ms'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'Percent99')
            },
            {
                name: 'data',
                yAxis: 1,
                zIndex: 1,
                marker: createSeriesMarker(),
                color: theme.colors.stats.allDataMB,
                tooltip: {
                    valueSuffix: ' MB'
                },
                data: createSeriesDataStepStats(timelineStats, scenarioIndex, stepIndex, 'AllDataMB')
            },
            {
                name: titles.series.loadSimulation,
                yAxis: 2,
                zIndex: 2,
                marker: createSeriesMarker(),
                color: theme.colors.stats.loadSimulation,
                tooltip: createTooltipLoadSimulation(timelineStats, scenarioIndex),
                data: createSeriesDataScenarioStatsLoadSimulation(timelineStats, scenarioIndex)
            }
        ]
    });

    const renderChart = (container, settings) => setTimeout(() => Highcharts.chart(container, settings), 0);

    // Titles
    const titles = {
        charts: {
            scenarioRequests: 'requests number',
            latencyIndicators: 'latency indicators',
            throughput: 'throughput',
            latency: 'latency'
        },
        axisX: {
            duration: 'duration',
            latency: 'latency'
        },
        axisY: {
            requests: 'requests',
            latency: 'latency, requests',
            loadSimulation: 'load simulation',
            rps: 'RPS'
        },
        series: {
            latencyLow: 't < 800ms',
            latencyMedium: '800ms < t < 1.2s',
            latencyHigh: 't > 1.2s',
            ok: 'ok',
            failed: 'failed',
            loadSimulation: 'load simulation',
            latency: 'latency',
            rps: 'RPS'
        }
    };

    // Theme
    const theme = {
        colors: {
            yAxis: '#212121', //elegant-color-dark
            xAxis: '#212121', //elegant-color-dark
            stats: {
                okCount: '#26a69a', // teal lighten-2
                failedCount: '#ff5252', // red accent-2
                rps: '#1565c0', // blue darken-3
                allDataMB: '#4e342e', // brown darken-3
                min: '#2e7d32', // green darken-3
                mean: '#9e9d24', // lime darken-3
                max: '#ff3d00', // deep-orange  darken-3
                stdDev: '#558b2f', // light-green darken-3
                percentile75: '#0277bd', // light-blue darken-3
                percentile95: '#283593', // indigo darken-3
                percentile99: '#6a1b9a', // purple darken-3
                loadSimulation: '#ff8f00', // amber darken-3
                latency: {
                    low: '#00e676', // green accent-3
                    medium: '#ffea00', // yellow accent-3
                    high: '#ff9100' // orange accent-3
                }
            }
        }
    };

    // Vue Components
    Vue.component('no-data', {
        template: "#no-data-template"
    });

    Vue.component('scenario-header', {
        props: ['scenarioStats', 'scenarioIndex'],
        template: '#scenario-header-template'
    });

    Vue.component('node-info-table', {
        props: ['nodeInfo'],
        template: '#node-info-table-template'
    });

    Vue.component('scenario-stats-table', {
        props: ['scenarioStats'],
        template: '#scenario-stats-table-template'
    });

    Vue.component('plugins-stats-table', {
        props: ['pluginsStats'],
        template: '#plugins-stats-table-template'
    });

    Vue.component('lazy-load', {
        props: ['loadedViews', 'loadForView'],
        template: '<div><slot v-if="loadedViews[loadForView]"></slot></div>'
    });

    Vue.component('chart-scenario-requests', {
        props: ['scenarioStats'],
        template: '<div ref="container" class="chart chart-scenario-requests"></div>',
        mounted() {
            const settings = createSettingsChartScenarioRequests(theme, this.scenarioStats, titles);
            renderChart(this.$refs.container, settings);
        }
    });

    Vue.component('chart-scenario-latency-indicators', {
        props: ['scenarioStats'],
        template: '<div ref="container" class="chart chart-scenario-latency-col"></div>',
        mounted() {
            const settings = createSettingsChartScenarioLatencyIndicators(theme, this.scenarioStats, titles);
            renderChart(this.$refs.container, settings);
        }
    });

    Vue.component('chart-scenario-latency-distribution', {
        props: ['timelineStats', 'scenarioIndex'],
        template: '<div ref="container" class="chart chart-timeline chart-timeline-scenario-load"></div>',
        mounted() {
            const settings = createSettingsChartScenarioLatencyDistribution(theme, this.timelineStats, this.scenarioIndex, titles);
            renderChart(this.$refs.container, settings);
        }
    });

    Vue.component('chart-timeline-step-throughput', {
        props: ['timelineStats', 'scenarioIndex', 'stepIndex'],
        template: '<div ref="container" class="chart chart-timeline chart-timeline-step-throughput"></div>',
        mounted() {
            const settings = createSettingsChartStepThroughput(theme, this.timelineStats, this.scenarioIndex, this.stepIndex, titles);
            renderChart(this.$refs.container, settings);
        }
    });

    Vue.component('chart-timeline-step-latency', {
        props: ['timelineStats', 'scenarioIndex', 'stepIndex'],
        template: '<div ref="container" class="chart chart-timeline chart-timeline-step-latency"></div>',
        mounted() {
            const settings = createSettingsChartStepLatency(theme, this.timelineStats, this.scenarioIndex, this.stepIndex, titles);
            renderChart(this.$refs.container, settings);
        }
    });

    // Vue Application
    const app = new Vue({
        el: appContainer,
        data: {
            viewModel,
            sideBarActive: true,
            currentView: 'test-suite',
            loadedViews: {},
            showCharts: true
        },
        computed: {
            showChartsSwitcher: function () {
                return this.currentView === 'test-suite';
            }
        },
        methods: {
            toggleSideBar: function () {
                this.sideBarActive = !this.sideBarActive;
            },
            selectView: function (view) {
                this.currentView = view;

                if (!this.loadedViews[view])
                    this.$set(this.loadedViews, view, true);
            }
        }
    });
};

</script>


    <script>
        // example of view model structure can be found in data.js
const viewModel = { nBomberInfo: {
  "NBomberVersion": "1.1.0"
}, testInfo: {
  "TestSuite": "nbomber_default_test_suite_name",
  "TestName": "nbomber_default_test_name"
}, statsData: {
  "RequestCount": 2950,
  "OkCount": 2950,
  "FailCount": 0,
  "AllDataMB": 0.0,
  "ScenarioStats": [
    {
      "ScenarioName": "hello_world",
      "RequestCount": 2950,
      "OkCount": 2950,
      "FailCount": 0,
      "AllDataMB": 0.0,
      "StepStats": [
        {
          "StepName": "step",
          "RequestCount": 2950,
          "OkCount": 2950,
          "FailCount": 0,
          "Min": 999,
          "Mean": 1001,
          "Max": 1019,
          "RPS": 37,
          "Percent50": 999,
          "Percent75": 1000,
          "Percent95": 1013,
          "Percent99": 1019,
          "StdDev": 4,
          "MinDataKb": 0.0,
          "MeanDataKb": 0.0,
          "MaxDataKb": 0.0,
          "AllDataMB": 0.0
        }
      ],
      "LatencyCount": {
        "Less800": 0,
        "More800Less1200": 2950,
        "More1200": 0
      },
      "LoadSimulationStats": {
        "SimulationName": "inject_per_sec",
        "Value": 50
      },
      "Duration": "00:01:00"
    }
  ],
  "PluginStats": [],
  "NodeInfo": {
    "MachineName": "EC2AMAZ-8PU4E7S",
    "NodeType": {
      "Case": "SingleNode"
    },
    "CurrentOperation": 5,
    "OS": {
      "Platform": 2,
      "ServicePack": "",
      "Version": {
        "Major": 6,
        "Minor": 2,
        "Build": 9200,
        "Revision": 0,
        "MajorRevision": 0,
        "MinorRevision": 0
      },
      "VersionString": "Microsoft Windows NT 6.2.9200.0"
    },
    "DotNetVersion": ".NETCoreApp,Version=v3.1",
    "Processor": "Intel64 Family 6 Model 79 Stepping 1, GenuineIntel",
    "CoresCount": 4
  }
}, timeLineStatsData: {
  "TimeStamps": [
    "00:00:10",
    "00:00:20",
    "00:00:30",
    "00:00:40",
    "00:00:50",
    "00:01:00"
  ],
  "ScenarioStats": [
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 450,
        "OkCount": 450,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 450,
            "OkCount": 450,
            "FailCount": 0,
            "Min": 999,
            "Mean": 999,
            "Max": 1006,
            "RPS": 40,
            "Percent50": 999,
            "Percent75": 999,
            "Percent95": 1006,
            "Percent99": 1006,
            "StdDev": 2,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 450,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:00:10.0110011"
      }
    ],
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 950,
        "OkCount": 950,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 950,
            "OkCount": 950,
            "FailCount": 0,
            "Min": 999,
            "Mean": 1001,
            "Max": 1014,
            "RPS": 37,
            "Percent50": 999,
            "Percent75": 1000,
            "Percent95": 1013,
            "Percent99": 1013,
            "StdDev": 4,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 950,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:00:20.0100663"
      }
    ],
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 1450,
        "OkCount": 1450,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 1450,
            "OkCount": 1450,
            "FailCount": 0,
            "Min": 999,
            "Mean": 1000,
            "Max": 1014,
            "RPS": 38,
            "Percent50": 999,
            "Percent75": 1000,
            "Percent95": 1008,
            "Percent99": 1013,
            "StdDev": 4,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 1450,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:00:30.0100974"
      }
    ],
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 1950,
        "OkCount": 1950,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 1950,
            "OkCount": 1950,
            "FailCount": 0,
            "Min": 999,
            "Mean": 1001,
            "Max": 1019,
            "RPS": 36,
            "Percent50": 999,
            "Percent75": 1001,
            "Percent95": 1013,
            "Percent99": 1019,
            "StdDev": 5,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 1950,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:00:40.0007366"
      }
    ],
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 2450,
        "OkCount": 2450,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 2450,
            "OkCount": 2450,
            "FailCount": 0,
            "Min": 999,
            "Mean": 1001,
            "Max": 1019,
            "RPS": 37,
            "Percent50": 999,
            "Percent75": 1000,
            "Percent95": 1013,
            "Percent99": 1019,
            "StdDev": 5,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 2450,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:00:50.0025167"
      }
    ],
    [
      {
        "ScenarioName": "hello_world",
        "RequestCount": 2950,
        "OkCount": 2950,
        "FailCount": 0,
        "AllDataMB": 0.0,
        "StepStats": [
          {
            "StepName": "step",
            "RequestCount": 2950,
            "OkCount": 2950,
            "FailCount": 0,
            "Min": 999,
            "Mean": 1001,
            "Max": 1019,
            "RPS": 37,
            "Percent50": 999,
            "Percent75": 1000,
            "Percent95": 1013,
            "Percent99": 1019,
            "StdDev": 4,
            "MinDataKb": 0.0,
            "MeanDataKb": 0.0,
            "MaxDataKb": 0.0,
            "AllDataMB": 0.0
          }
        ],
        "LatencyCount": {
          "Less800": 0,
          "More800Less1200": 2950,
          "More1200": 0
        },
        "LoadSimulationStats": {
          "SimulationName": "inject_per_sec",
          "Value": 50
        },
        "Duration": "00:01:00"
      }
    ]
  ]
} };
        initApp('#app', viewModel);
    </script>

</body>
</html>
